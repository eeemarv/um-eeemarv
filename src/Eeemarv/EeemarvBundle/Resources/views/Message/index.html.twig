{% extends 'EeemarvBundle::base.html.twig' %}

{% block page_header_inner %}{{ 'messages'|trans }}{% endblock %}

{% block buttons %}
	<a href="{{ path('eeemarv_eeemarv_message_new') }}" class="btn btn-success">{{ 'new'|trans }}</a>
{% endblock %} 


{% block inner_content -%}
{{ knp_pagination_render(pagination, null, {}, {'alignment': 'right', 'first_label': '<<', 'last_label': '>>', 'prev_label': '<', 'next_label': '>'}) }}
    <table class="table table-striped table-condensed">
        <thead>
            <tr><th>
				<div class="row-fluid">								
                    <div class="span3">{{ knp_pagination_sortable(pagination, 'user'|trans, 'u.code') }}</div> 				
					<div class="span7">{{ knp_pagination_sortable(pagination, 'subject'|trans, 'm.subject') }}</div>
					<div class="span2">{{ knp_pagination_sortable(pagination, 'date'|trans, 'm.createdAt') }}</div> 
				</div>                
            </th></tr>
        </thead>
        <tbody>
        {% for message in pagination %}
            <tr><td>
				<div class="row-fluid">

					<div class="span3"><a href="{{ path('eeemarv_eeemarv_user_show', { 'code': message.user.code }) }}">
						{{ message.createdBy.code }} {{ message.createdBy.username }}</a></div>                			
					<div class="span7">
						<a href="{{ path('eeemarv_eeemarv_message_show', { 'id': message.id, 'slug': message.slug }) }}">{{ message.subject }}</a>
					</div>					
					
					<div class="span2">{% if message.createdAt %}{{ message.createdAt|date('Y-m-d') }}{% endif %}</div>
				</div>
				{#<div class="row-fluid">					
					<div class="span7 offset1">{% if message.category %}<i class="icon-tree"></i>{{ message.category.name }}{% endif %}</div>

				</div>
				<div class="row-fluid">					
					<div class="span7 offset1"><i class="icon-tags"></i> {% if message.category %}{{ message.category.name }}{% endif %}</div>
					<div class="span2"><i class="icon-comments"></i> {{ message.createdBy.code }}</div>                
					<div class="span2"><i class="icon-eye-open"></i> {{ message.createdBy.username }}</div>
				</div>	#}			
				
				
					
            </td></tr>
        {% endfor %}
        </tbody>
    </table>
{{ knp_pagination_render(pagination, null, {}, {'alignment': 'right', 'first_label': '<<', 'last_label': '>>', 'prev_label': '<', 'next_label': '>'}) }}    
{% endblock %}
