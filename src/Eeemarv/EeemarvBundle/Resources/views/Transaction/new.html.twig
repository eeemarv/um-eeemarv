{% extends 'EeemarvBundle::base.html.twig' %}

{% block page_header_inner %}{{ 'transaction_new'|trans }}{% endblock %}


{% block inner_content -%}


    <form action="{{ path('lets_transact_transactions_create') }}" method="post" {{ form_enctype(form) }}>
		{{ form_errors(form) }}
		
		<input type="hidden" name="limit" value="{{ app.user.balanceLimit }}" id="limit">
		<input type="hidden" name="balance" value="{{ app.user.balance }}" id="balance">
		<input type="hidden" name="currency_rate" value="{{ currency_rate }}" id="currency_rate">
		{% set maximum = app.user.balance - app.user.balanceLimit %}
    
		<div class="row-fluid">
			<div class="input-prepend span12">
				<span class="add-on">@</span>
					{{ form_widget(form.toCode, {'attr': {'class': 'span11', 'placeholder': 'code'|trans, 'data-provide': 'typeahead', 'autocomplete': 'off' }}) }}
			</div>
			{#<div class="span12">#}
				{{ form_errors(form.toCode, {'attr': {'class': 'span12'}}) }}
					
		</div>
	{#	<div class="row-fluid">

		</div>	</div>	#}
		<div class="row-fluid">    
			<div class="input-append span6">
				{{ form_widget(form.amount, {'attr': {'class': 'span2 text-right', 'placeholder': '0' }}) }}	
				<span class="add-on">{{ 'currency_plural'|trans({}, 'site') }}</span>
				<span class="add-on">{{ 'maximum'|trans({}, 'common') }}: <span id="maximum">{{ maximum // currency_rate }}</span></span> 
				{{ form_errors(form.amount) }}
			</div>
			
			<div class="input-prepend input-append span6">
				<span class="add-on"><i class="icon-chevron-right"></i> <span id="rate">1:1</span></span>
				<input type="text" class="span2 text-right" placeholder="0" id="amount_destination">
	
				<span class="add-on">{{ 'currency_plural'|trans({}, 'site') }}</span>
			</div>			
			
			
		</div>
 		<div class="row-fluid">    

			{{ form_errors(form.amount) }}

		</div>
		
		<div class="row-fluid">
			<div class="input-prepend span12">
				<span class="add-on"><i class="icon-pencil"></i></span>
					{{ form_widget(form.description, {'attr': {'class': 'span11', 'placeholder': 'description'|trans }}) }}
			</div>	
		</div>

{#		<div class="row-fluid">
			<div class="input input-prepend span12">
			<span class="add-on"><i class="icon-tags"></i></span>		
				{{ form_widget(form.tags, {'attr': {'class': 'span11', 'placeholder': 'tags'|trans }}) }}
            </div>
        </div>
#}
    
      {#  {{ form_widget(form) }} #}
        
        
        {{ form_rest(form) }}
        
        <p>
            <button type="submit">{{ 'create'|trans }}</button>
        </p>
    </form>

        <ul class="record_actions">
    <li>
        <a href="{{ path('lets_transact_transactions') }}">
            {{ 'back_to_list'|trans }}
        </a>
    </li>
</ul>


{% endblock %}

{% block javascripts_extra %}

<script>

var subjects = ['PHP', 'MySQL', 'SQL', 'PostgreSQL', 'HTML', 'CSS', 'HTML5', 'CSS3', 'JSON', 'hihhahaahahahhhahahahhahahahhahah', 'uni kuni', 'bert', 'sander', 'inge', 'jasmijn', 'erik', 'josefien', 'rebecca', 'janine', 'evelientje', 'kurt', 'mosterd', 'weegbree', 'vl/lap/vi Virginie', 'god', 'jesus', 'abraham', 'isaak', 'veer', 'trampoline', 'autowrak', 'botsotto', 'servela', 'pizza', 'zwartwit', 'arty-farty', 'jekw jeremy kwaakbekken'];   
var users = [];
$('document').ready(function(){
	$('#lets_transactbundle_transactiontype_toCode').typeahead({source: subjects});

	$('#lets_transactbundle_transactiontype_tags').typeahead({source: subjects});
		

	});	

</script>

{% endblock %}
